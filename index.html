<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Balança d'Equacions de primer grau</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Free HTML5 Website Template by uicookies.com" />
    <meta name="keywords" content="free bootstrap 4, free bootstrap 4 template, free website templates, free html5, free template, free website template, html5, css3, mobile first, responsive" />
    <meta name="author" content="uicookies.com" />

    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>


    <nav class="navbar navbar-expand-lg navbar-dark bg-dark probootstrap-navabr-dark">
        <div class="container">
          <a class="navbar-brand" href="index.html">Balança d'Equacions</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#probootstrap-nav" aria-controls="probootstrap-nav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="probootstrap-nav">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item"><a class="nav-link">Creat per Pau Balaguer</a></li>
            </ul>

          </div>
        </div>
      </nav>


    <section class="probootstrap-cover">
      <div class="container">
        <div class="row probootstrap-vh-100 align-items-center text-center">
          <div class="col-sm">
            <div class="probootstrap-text">
              <h2 class="text-white mb-5">Balança d'equacions de primer grau</h2>
              <div class="col-md-12">
                <form action="#" method="post" class="probootstrap-form mb-2">
                  <div class="row justify-content-center align-items-center">
                    <div class="col-md-2">
                      <div class="form-group">
                        <label for="fname" style="color:white">Número</label>
                        <input id="numero" type="text" class="form-control" id="fname" name="fname">
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-group justify-content-center align-self-center">
                        <label for="" style="color:white">Operacions</label>
                        <br/>
                        <a href="#" onclick="suma();" class="btn btn-primary btn-outline-white mb-2">+</a>
                        <a href="#" onclick="resta();" class="btn btn-primary btn-outline-white mb-2">-</a>
                        <a href="#" onclick="divisio();" class="btn btn-primary btn-outline-white mb-2">%</a>
                        <a href="#" onclick="multiplicacio();" class="btn btn-primary btn-outline-white mb-2">x</a>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
              <div id="equacio" style="color:white; text-transform: lowercase;">
                2x + 3 = 10
              </div>
              <div class="col-md-12 mt-5">
                <a href="#" onclick="passos();" class="btn btn-primary mr-4 mb-2">Veure passos</a>
                <a href="#" onclick="reinicia();" class="btn btn-outline-warning  mr-4 mb-2">Reiniciar</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="probootstrap-footer">
      <div class="container">
        <div class="row">
          <div class="col-md text-md-right text-left">
            <p><small>&copy; Unlock 2017. All Rights Reserved. <br> Made with <span class="icon-heart"></span> by <a href="https://uicookies.com/">uiCookies</a> Demo Images: Unsplash</small></p>
          </div>
        </div>
      </div>
    </footer>


    <script src="js/jquery-3.2.1.slim.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/main.js"></script>

    <script type="text/javascript">
      function getRndInteger(min, max) {
        return Math.floor(Math.random() * (max - min + 1) ) + min;
      }

      m1 = getRndInteger(0, 10);
      n1 = getRndInteger(0, 10);
      m2 = getRndInteger(0, 10);
      n2 = getRndInteger(0, 10);

      equacions = [];
      operacions = [];

      mostraEquacio();

      function mostraEquacio(){
        if(n1 % 1 != 0) n1 = n1.toFixed(2)
        if(m1 % 1 != 0) m1 = m1.toFixed(2)
        if(n2 % 1 != 0) n2 = n2.toFixed(2)
        if(m2 % 1 != 0) m2 = m2.toFixed(2)
        // M1
        if(m1 == 1){
          eq = "x";
        }else{
          if(m1 == 0){
            eq = "";
          }else{
            if(m1 == -1){
              eq = "-x";
            }else{
              eq = m1 + "x";
            }
          }
        }

        // N1
        if(n1 == 0 && m1 != 0){
          eq = eq + " = ";
        }else{
          if(m1 != 0){
            eq = eq + " + " + n1 + " = ";
          }else{
            eq = eq + n1 + " = ";
          }
        }

        // M2
        if(m2 > 1){
          eq = eq + m2 + "x";
        }else{
          if(m2 == 0){
            eq = eq + "";
          }else{
            if(m2 == -1){
              eq = eq + "-x";
            }else{
              eq = eq + "x";
            }
          }
        }

        // N2
        if(n2 != 0){
          if(m2 != 0){
            eq = eq + " + " + n2;
          }else{
            eq = eq + n2;
          }
        }else{
          if(m2 == 0){
            eq = eq + "0"
          }
        }

        equacions.push(eq);
        $("#equacio").text(eq)
        $("#numero").val("");
        checkIfResult();
      }

      function suma(){
        if(!isNaN($("#numero").val())){
          n1 = n1 + parseFloat($("#numero").val());
          n2 = n2 + parseFloat($("#numero").val());
          operacions.push("+" + $("#numero").val());
        }else if($("#numero").val().toLowerCase().includes("x")){
          if($("#numero").val().toLowerCase() == "x"){
            m1 = m1 + 1;
            m2 = m2 + 1;
            operacions.push("+" + $("#numero").val());
          }else{
            number = $("#numero").val().substring(0,$("#numero").val().length-1);
            if(!isNaN(number)){
              m1 = m1 + parseFloat(number);
              m2 = m2 + parseFloat(number);
              operacions.push("+" + $("#numero").val());
            }else{
              window.alert("Valor invàlid!");
            }
          }
        }else{
          window.alert("Valor invàlid!");
        }
        mostraEquacio();
      }
      function resta(){
        if(!isNaN($("#numero").val())){
          n1 = n1 - parseFloat($("#numero").val());
          n2 = n2 - parseFloat($("#numero").val());
          operacions.push("-" + $("#numero").val());
        }else if($("#numero").val().toLowerCase().includes("x")){
          if($("#numero").val().toLowerCase() == "x"){
            m1 = m1 - 1;
            m2 = m2 - 1;
            operacions.push("-" + $("#numero").val());
          }else{
            number = $("#numero").val().substring(0,$("#numero").val().length-1);
            if(!isNaN(number)){
              m1 = m1 - parseFloat(number);
              m2 = m2 - parseFloat(number);
              operacions.push("-" + $("#numero").val());
            }else{
              window.alert("Valor invàlid!");
            }
          }
        }else{
          window.alert("Valor invàlid!");
        }
        mostraEquacio();
      }
      function divisio(){
        if(!isNaN($("#numero").val())){
          n1 = n1 / parseFloat($("#numero").val());
          n2 = n2 / parseFloat($("#numero").val());
          m1 = m1 / parseFloat($("#numero").val());
          m2 = m2 / parseFloat($("#numero").val());
          operacions.push("%" + $("#numero").val());
        }else{
          window.alert("Valor invàlid!");
        }
        mostraEquacio();
      }
      function multiplicacio(){
        if(!isNaN($("#numero").val())){
          n1 = n1 * parseFloat($("#numero").val());
          n2 = n2 * parseFloat($("#numero").val());
          m1 = m1 * parseFloat($("#numero").val());
          m2 = m2 * parseFloat($("#numero").val());
          operacions.push("*" + $("#numero").val());
        }else{
          window.alert("Valor invàlid!");
        }
        mostraEquacio();
      }

      function checkIfResult(){
        if(m1 == 1 && n1 == 0 && m2 == 0){
          window.alert("El valor de x és: " + n2);
        }

        if(m2 == 1 && n2 == 0 && m1 == 0){
          window.alert("El valor de x és: " + n1);
        }
      }

      function passos(){
        llistaPassos = ""
        for(var i = 0; i<equacions.length; i++){
          if(i>0) llistaPassos += "[" + operacions[i-1] + "]\n" + equacions[i] + "\n";
          else llistaPassos += equacions[i] + "\n";
        }
        window.alert(llistaPassos);
      }

      function reinicia(){
        location.reload();
      }
    </script>
  </body>
</html>
